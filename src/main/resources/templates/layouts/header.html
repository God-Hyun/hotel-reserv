<!-- layouts/header.html -->
<header th:fragment="header">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="/main">
      <!-- 로고 이미지 추가 -->
      <img src="/images/logo.jpg" alt="호텔 로고" style="height: 40px;">
      GodHyun hotel
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" th:href="@{/main}">홈</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            주변 관광지
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" th:href="@{/katsuo-omoi}">카츠오모이</a>
            <a class="dropdown-item" th:href="@{/changgok-stream}">창곡천</a>
            <a class="dropdown-item" th:href="@{/central-plaza}">중앙광장</a>
          </div>
        </li>

        <!-- 교통 안내 드롭다운 메뉴 -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="transportDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            교통 안내
          </a>
          <div class="dropdown-menu" aria-labelledby="transportDropdown">
            <a class="dropdown-item" th:href="@{/directions}">찾아오는 길</a>
            <a class="dropdown-item" th:href="@{/public-transport}">대중교통 이용 안내</a>
            <a class="dropdown-item" th:href="@{/by-car}">자가용 이용 안내</a>
          </div>
        </li>

        <!-- 예약 정보 드롭다운 메뉴 -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="reservationDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            예약 정보
          </a>
          <div class="dropdown-menu" aria-labelledby="reservationDropdown">
            <a class="dropdown-item" th:href="@{/bookings/list}">예약 상황 보기</a>
            <a class="dropdown-item" th:href="@{/bookings/create}">예약하기</a>
          </div>
        </li>

        <!-- 추가 정보 드롭다운 메뉴 -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="infoDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            추가 정보
          </a>
          <div class="dropdown-menu" aria-labelledby="infoDropdown">
            <a class="dropdown-item" th:href="@{/resort-news}">리조트 소식</a>
            <a class="dropdown-item" th:href="@{/reviews}">이용 후기</a>
          </div>
        </li>

        <!-- 로그인이 되지 않았을 때 표시 -->
        <li class="nav-item dropdown" sec:authorize="isAnonymous()">
          <a class="nav-link dropdown-toggle" href="#" id="login" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            로그인
          </a>
          <div class="dropdown-menu" aria-labelledby="login">
            <a class="dropdown-item" th:href="@{/login}">로그인</a>
            <a class="dropdown-item" th:href="@{/register}">회원가입</a>
          </div>
        </li>

        <!-- 로그인이 되었을 때 표시 -->
        <li class="nav-item dropdown" sec:authorize="isAuthenticated()">
          <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            마이페이지
          </a>
          <div class="dropdown-menu" aria-labelledby="userDropdown">
            <a class="dropdown-item" th:href="@{/profile}">예약 조회</a>
            <!-- 로그아웃 링크에 JavaScript 이벤트 추가 -->
            <a class="dropdown-item" href="#" onclick="confirmLogout()">로그아웃</a>
          </div>
        </li>

        <!-- 관리자 기능 드롭다운 메뉴 (관리자 권한이 있을 때만 표시) -->
        <li class="nav-item dropdown" sec:authorize="hasAuthority('ROLE_ADMIN')">
          <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            관리자 기능
          </a>
          <div class="dropdown-menu" aria-labelledby="adminDropdown">
            <a class="dropdown-item" th:href="@{/admin-management}">예약 관리</a>
            <!-- 로그아웃 링크에 JavaScript 이벤트 추가 -->
            <a class="dropdown-item" href="#" onclick="confirmLogout()">로그아웃</a>
          </div>
        </li>

        <li class="nav-item">
          <a class="nav-link btn btn-primary text-white" th:href="@{/bookings/create}">예약하기</a>
        </li>
      </ul>
    </div>
  </nav>
  <script>
    function confirmLogout() {
        if (confirm("정말로 로그아웃을 하시겠습니까?")) {
            window.location.href = '/logout';
        }
    }
  </script>
</header>

